-- Author: Hammer1279
-- GitHub: https://github.com/Hammer1279
-- Repository: https://github.com/SWProBuilders/stormworks-tools
-- Workshop: https://steamcommunity.com/id/hammer1279/myworkshopfiles
--This code is the intellectual property of me and you do not hold any rights to this, do not copy or use this unless you got the clear ok from me!--
bv="&peer="bu="default"bt='[CCV2]'bs="&user="br="CCV2_Item"bq="&auth="bp="autoauth"bo="/connection?type="bn="/life?type="bm="&admin="bl="Error Giving Item"bk="&server="bj="&state="bi="CCV2_Hide"bh="/command?cmd="bg="&steam_id="bf=""be="CCV2_Godmode"bd="[CCV2]"bc="[Server]"bb="You forgot the PeerID"Z="Could not find User with PeerID "Y="server"X=8080;function c(a)local d=false;if a=="true"then d=true end;return d end;function f(e)local g=server.getPlayers()for h,i in pairs(g)do if i.id==e then return i end end end;function k(table,j)local l={}for m,n in pairs(table)do l[n]=m end;return l[j]end;function p(o)table={"diving","firefighter","scuba","parachute","arctic","binoculars","cable","compass","defibrillator","fire_extinguisher","first_aid","flare","flaregun","flaregun_ammo","flashlight","hose","night_vision_binoculars","oxygen_mask","radio","radio_signal_locator","remote_control","rope","strobe_light","strobe_light_infrared","transponder","underwater_welding_torch","welding_torch","coal","hazmat","radiation_detector","c4","c4_detonator","speargun","speargun_ammo","pistol","pistol_ammo","smg","smg_ammo","rifle","rifle_ammo","grenade","machine_gun_ammo_box_k","machine_gun_ammo_box_he","machine_gun_ammo_box_he_frag","machine_gun_ammo_box_ap","machine_gun_ammo_box_i","light_auto_ammo_box_k","light_auto_ammo_box_he","light_auto_ammo_box_he_frag","light_auto_ammo_box_ap","light_auto_ammo_box_i","rotary_auto_ammo_box_k","rotary_auto_ammo_box_he","rotary_auto_ammo_box_he_frag","rotary_auto_ammo_box_ap","rotary_auto_ammo_box_i","heavy_auto_ammo_box_k","heavy_auto_ammo_box_he","heavy_auto_ammo_box_he_frag","heavy_auto_ammo_box_ap","heavy_auto_ammo_box_i","battle_shell_k","battle_shell_he","battle_shell_he_frag","battle_shell_ap","battle_shell_i","artillery_shell_k","artillery_shell_he","artillery_shell_he_frag","artillery_shell_ap","artillery_shell_i","glowstick"}return k(table,o)end;function r(q)return q:gsub("%%","%%25"):gsub("%s","%%20"):gsub("%!","%%21"):gsub("%#","%%23"):gsub("%$","%%24"):gsub("%&","%%26"):gsub("%'","%%27"):gsub("%(","%%28"):gsub("%)","%%29"):gsub("%*","%%2A"):gsub("%+","%%2B"):gsub("%,","%%2C"):gsub("%/","%%2F"):gsub("%:","%%3A"):gsub("%;","%%3B"):gsub("%=","%%3D"):gsub("%?","%%3F"):gsub("%@","%%40"):gsub("%[","%%5B"):gsub("%]","%%5D")end;function onTick(s)if not g_savedata[Y]then g_savedata[Y]=bu end end;function onCreate(t)if not g_savedata[Y]then g_savedata[Y]=bu end;server.notify(-1,"Custom Commands V2","Successfully loaded Plugin",9)server.httpGet(X,"/start?is_world_create="..tostring(t)..bk..tostring(g_savedata[Y]))end;function onPlayerJoin(u,v,e,w,x)if u then server.announce(bc,v.." joined the game")server.announce(bd,"All available Commands: (only when Authed)",e)server.announce(bf,"?revive [Peer_ID] - Revive someone",e)server.announce(bf,"?heal [Peer_ID] - Heal someone",e)server.announce(bf,"---",e)server.announce(bf,"Feel free to join our Discord:",e)server.announce(bf,"https://swprobuilders.com",e)server.httpGet(X,bo.."join"..bs..r(v)..bv..e..bg..u..bk..tostring(g_savedata[Y])..bm..tostring(w)..bq..tostring(x))server.httpGet(X,"/info")if g_savedata[bp]then server.addAuth(e)end end end;function onPlayerLeave(u,v,e,w,x)server.announce(bc,v.." left the game")server.httpGet(X,bo.."leave"..bs..r(v)..bv..e..bg..u..bk..tostring(g_savedata[Y])..bm..tostring(w)..bq..tostring(x))end;function onPlayerDie(u,v,e,w,x)server.announce(bc,v.." died")server.httpGet(X,bn.."die"..bs..r(v)..bv..e..bg..u..bk..tostring(g_savedata[Y])..bm..tostring(w)..bq..tostring(x))end;function onPlayerRespawn(e)local y=f(e)server.httpGet(X,bn.."respawn"..bs..r(y.name)..bv..e..bg..y.steam_id..bk..tostring(g_savedata[Y])..bm..tostring(y.admin)..bq..tostring(y.auth))end;function onVehicleUnload(z)end;function onCustomCommand(A,e,B,C,D,E,F,G,H,I)local J=f(e)if D:lower()=="?item"and(B or e==0)then local o=p(E)local K=tonumber(F)local L=tonumber(G)local M=tonumber(H)local N=false;local O,P=server.getPlayerCharacterID(e)local Q=server.setCharacterItem(O,K,o,N,L,M)if Q then server.announce(br,"Item Given",e)else server.announce(br,bl,e)end end;if D:lower()=="?give"and(B or e==0)then local R=tonumber(E)local o=p(F)local K=tonumber(G)local L=tonumber(H)local M=tonumber(I)local N=false;local O,P=server.getPlayerCharacterID(R)local Q=server.setCharacterItem(O,K,o,N,L,M)if Q then server.announce(br,J.name.." gave "..F.." in Slot "..G,R)server.announce(br,"Item Given to "..f(R).name,e)else server.announce(br,bl,e)end end;if D:lower()=="?godmode"and(B or e==0)then local O,P=server.getPlayerCharacterID(e)local S=c(E)local z,Q=server.getCharacterVehicle(O)Q=server.setVehicleInvulnerable(z,S)if Q then server.announce(be,"Godmode set",e)else server.announce(be,"Error setting Godmode",e)end end;if D:lower()=="?hide"and(B or e==0)then local O,P=server.getPlayerCharacterID(e)local T=c(E)local z,Q=server.getCharacterVehicle(O)Q=server.setVehicleShowOnMap(z,T)if Q then server.announce(bi,"Hide set",e)else server.announce(bi,"Error setting hide",e)end end;if D:lower()=="?autoauth"and(B or e==0)then if not g_savedata[bp]then server.announce(bt,"AutoAuth has been Enabled")server.httpGet(X,bh..bp..bj.."on"..bs..r(J.name)..bv..e..bg..J.steam_id..bk..tostring(g_savedata[Y])..bm..tostring(B)..bq..tostring(C))g_savedata[bp]=true else server.announce(bt,"AutoAuth has been Disabled")server.httpGet(X,bh..bp..bj.."off"..bs..r(J.name)..bv..e..bg..J.steam_id..bk..tostring(g_savedata[Y])..bm..tostring(B)..bq..tostring(C))g_savedata[bp]=false end end;if D:lower()=="?setServer"and(B or e==0)then g_savedata[Y]=E;server.announce(bt,"Server Name set to "..E)server.httpGet(X,bh.."setServer"..bj..E..bs..r(J.name)..bv..e..bg..J.steam_id..bk..tostring(g_savedata[Y])..bm..tostring(B)..bq..tostring(C))end;if D:lower()=="?kill"and(B or e==0)then if not E then server.announce(bd,bb,e)else local O,Q=server.getPlayerCharacterID(tonumber(E))if Q then local y=f(tonumber(E))server.killCharacter(O)server.announce(bd,J.name.." killed "..y.name)server.httpGet(X,bh.."kill"..bj..y.id..bs..r(J.name)..bv..e..bg..J.steam_id..bk..tostring(g_savedata[Y])..bm..tostring(B)..bq..tostring(C))else server.announce(bd,Z..E,e)end end end;if D:lower()=="?revive"and(C or e==0)then if not E then server.announce(bd,bb,e)else local O,Q=server.getPlayerCharacterID(tonumber(E))if Q then local U=100;server.reviveCharacter(O)server.setCharacterData(O,U,true,false)local y=f(tonumber(E))server.announce(bd,J.name.." revived "..y.name)server.httpGet(X,bh.."revive"..bj..y.id..bs..r(J.name)..bv..e..bg..J.steam_id..bk..tostring(g_savedata[Y])..bm..tostring(B)..bq..tostring(C))else server.announce(bd,Z..E,e)end end end;if D:lower()=="?heal"and(C or e==0)then if not E then server.announce(bd,bb,e)else local O,Q=server.getPlayerCharacterID(tonumber(E))if Q then local U=100;server.setCharacterData(O,U,true,false)local y=f(tonumber(E))server.announce(bd,J.name.." healed "..y.name)server.httpGet(X,bh.."heal"..bj..y.id..bs..r(J.name)..bv..e..bg..J.steam_id..bk..tostring(g_savedata[Y])..bm..tostring(B)..bq..tostring(C))else server.announce(bd,Z..E,e)end end end end;function httpReply(V,W,_)end
